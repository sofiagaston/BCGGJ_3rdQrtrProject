<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Set character encoding and viewport settings -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Page title -->
    <title>Punching Game >:C</title>
    <!-- Link to external CSS stylesheet -->
    <link rel="stylesheet" href="styles.css">
    <!-- Preconnect to Google Fonts for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Import VT323 font from Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
</head>
<body id="wholePage">
    <!-- Main game container -->
    <div class="container">
        <h1>Punching Game >:C</h1>
        <!-- Game elements container -->
        <div class="game-container">
            <!-- Player section -->
            <div class="player">
                <h2>Player</h2>
                <div class="health">Health: <span id="playerH">100</span></div>
            </div>
            <!-- Opponent section -->
            <div class="opponent">
                <h2>Opponent</h2>
                <div class="health">Health: <span id="opponentH">100</span></div>
            </div>
        </div>
        <!-- Buttons container -->
        <div class="buttons-container">
            <label for="heads-tales">Select: </label>
            <select id="heads-tales">
                <option value="Head">Head</option>
                <option value="Tail">Tail</option>
            </select>
            <!-- Action buttons container -->
            <div class="container">
                <!-- Coin toss button -->
                <button id="coinTossButton" class="btn">
                    <img src="images/flipCoin.png" height="35px" alt="Coin Toss">
                </button>
                <!-- Attack button -->
                <button id="attackButton" class="btn disabled">
                    <img src="images/attackButton.png" height="35px" alt="Attack">
                </button>
                <!-- Defend button -->
                <button id="defendButton" class="btn disabled">
                    <img src="images/defendButton.png" height="35px" alt="Defend">
                </button>
                <!-- Restart button -->
                <button id="restartButton" class="btn disabled">
                    <img src="images/restartButton.png" height="35px" alt="Restart">
                </button>
            </div>
        <p class="result" id="gameResult"></p>
    </div>
    
    <script>
    // Add event listeners for button clicks
    document.getElementById('coinTossButton').addEventListener('click', flipCoin);
    document.getElementById('attackButton').addEventListener('click', playerAttack);
    document.getElementById('defendButton').addEventListener('click', playerDefend);
    document.getElementById('restartButton').addEventListener('click', resetGame);

    // Initialize player and opponent health and turn status
    let playerHP = 100;
    let opponentHP = 100;
    let turn = false;

    // Function to simulate flipping a coin and determining player's turn
    function flipCoin() {
        const outcome = Math.random() < 0.5 ? 'Head' : 'Tail'; // Determine coin outcome
        const playerDecision = document.getElementById('heads-tales').value; // Get player's choice
        const outcomeText = "Coin is " + outcome + ". You chose " + playerDecision + "!"; // Construct outcome message

        // Determine turn based on player's choice and coin outcome
        if (outcome === playerDecision) {
            turn = true;
            document.getElementById('attackButton').classList.remove('disabled'); // Enable attack button
            document.getElementById('defendButton').classList.add('disabled'); // Disable defend button
        } else {
            turn = false;
            document.getElementById('attackButton').classList.add('disabled'); // Disable attack button
            document.getElementById('defendButton').classList.remove('disabled'); // Enable defend button
        }

        // Update game result display
        document.getElementById('gameResult').innerText = outcomeText;
        document.getElementById('coinTossButton').classList.add('disabled'); // Disable coin toss button
        document.getElementById('restartButton').classList.remove('disabled'); // Enable restart button
    }

    // Function to calculate damage dealt by player or opponent
    function calculateDamage() {
        return Math.floor(Math.random() * 5) + 1; // Randomly generate damage between 1 and 5
    }

    // Function to handle player's attack action
    function playerAttack() {
        const damage = calculateDamage(); // Calculate damage
        opponentHP -= damage; // Apply damage to opponent's health
        document.getElementById('opponentH').innerText = Math.max(opponentHP, 0); // Update opponent's health display
        document.getElementById('gameResult').innerText = "You inflict " + damage + " damage."; // Display attack result
        checkHealth(); // Check game status
        if (opponentHP > 0) {
            turn = false; // Switch turn to opponent            opponentTurn(); // Opponent's turn
        }
        document.getElementById('defendButton').classList.remove('disabled'); // Enable defend button
    }

    // Function to handle player's defend action
    function playerDefend() {
        document.getElementById('gameResult').innerText = 'You will defend.'; // Display defend action
        checkHealth(); // Check game status
        if (opponentHP > 0) {
            turn = false; // Switch turn to opponent
            opponentTurn(); // Opponent's turn
        }
        document.getElementById('attackButton').classList.remove('disabled'); // Enable attack button
    }

    // Function to determine opponent's action (attack or defend)
    function opponentAction() {
        const action = Math.random() < 0.5 ? 'attack' : 'defend'; // Randomly choose action
        if (action === 'attack') {
            const damage = calculateDamage(); // Calculate damage
            playerHP -= damage; // Apply damage to player's health
            document.getElementById('playerH').innerText = Math.max(playerHP, 0); // Update player's health display
            document.getElementById('gameResult').innerText = "Opponent inflicts " + damage + " damage."; // Display attack result
        } else {
            document.getElementById('gameResult').innerText = 'Opponent defends.'; // Display defend action
        }
        checkHealth(); // Check game status
    }

    // Function to handle opponent's turn
    function opponentTurn() {
        opponentAction(); // Opponent's action
    }

    // Function to check game health and determine game status
    function checkHealth() {
        if (playerHP <= 0) {
            document.getElementById('gameResult').innerText = 'Opponent wins.'; // Display game result
            disableButtons(); // Disable buttons
        } else if (opponentHP <= 0) {
            document.getElementById('gameResult').innerText = 'Player wins.'; // Display game result
            disableButtons(); // Disable buttons
        }
    }

    // Function to reset game state
    function resetGame() {
        playerHP = 100; // Reset player health
        opponentHP = 100; // Reset opponent health
        document.getElementById('playerH').innerText = playerHP; // Update player's health display
        document.getElementById('opponentH').innerText = opponentHP; // Update opponent's health display
        document.getElementById('gameResult').innerText = ''; // Clear game result display
        document.getElementById('attackButton').classList.add('disabled'); // Disable attack button
        document.getElementById('defendButton').classList.add('disabled'); // Disable defend button
        document.getElementById('restartButton').classList.remove('disabled'); // Enable restart button
        document.getElementById('coinTossButton').classList.remove('disabled'); // Enable coin toss button
    }

    // Function to disable all buttons
    function disableButtons() {
        document.getElementById('attackButton').classList.add('disabled'); // Disable attack button
        document.getElementById('defendButton').classList.add('disabled'); // Disable defend button
        document.getElementById('restartButton').classList.remove('disabled'); // Enable restart button
    }
</script>

</body>
</html>
